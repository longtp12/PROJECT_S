let games = JSON.parse(localStorage.getItem('listgames'));
let gameName = localStorage.getItem('gameName');
let game = games.find(function(value){
    return value.name === gameName;
})

console.log(game);


let displayImg = document.getElementById('detail');

let html =  `<img src="${game.img[0]}" alt=""></img>
            <a href="${game.stores[0]}"target="_blank" rel="noopener noreferrer"><img width='100' height='auto' src="css/img/Steam_(service)-Logo.wine.png" alt=""></a>
            <a href="${game.stores[1]}"target="_blank"  rel="noopener noreferrer"><img width='100' height='auto' src="css/img/Epic_Games-Logo.wine.png" alt=""></a>
            <a href="${game.stores[2]}"target="_blank"  rel="noopener noreferrer"><img width='100' height='auto' src="css/img/Origin_(service)-Logo.wine.png" alt=""></a>
            <a href="${game.stores[3]}"target="_blank"  rel="noopener noreferrer"><img width='100' height='auto' src="css/img/Ubisoft-Logo.wine.png" alt=""></a>`;


displayImg.innerHTML = html;


function showComment(){

let displayComments = document.getElementById('comment');


for (let i = 0; i < game.commentSection.length; i++) {
    let html = `<li class="comment">
                <div class="comment-text">
                <p>${game.commentSection[i].commentText}</p>
                </div>
                <div class="comment-info">
                    <div class="comment-author-email">
                        ${game.commentSection[i].email}
                    <span class="comment-author">~${game.commentSection[i].name}</span>
                    </div>
                    <div class="rating">
                        ${game.commentSection[i].rating} <span class="fa fa-star checked"></span>
                    </div>
                </div>
                </li>`

displayComments.innerHTML += html;
    
}

}




if(!localStorage.commentData){
    localStorage.commentData = [];
}else{
    game.commentSection = JSON.parse(localStorage.commentData);
}

showComment();

function submit(){    

    let nameValue = document.getElementById('name-input').value;
    let emailValue = document.getElementById('email-input').value;
    let commentTextValue = document.getElementById('input').value;
    let ratingValue = rating();
    let comment = {
        name: `${nameValue}`,
        email: `${emailValue}`,
        commentText: `${commentTextValue}`,
        rating : `${ratingValue}`
    }


    game.commentSection.unshift(comment);
    console.log(game.commentSection);
    console.log(game);
    
    localStorage.commentData = JSON.stringify(game.commentSection);
    
   
    let displayComments = document.getElementById('comment');
    displayComments.innerHTML = '';
    for (let i = 0; i < game.commentSection.length; i++) {
        let html = `<li class="comment">
                    <div class="comment-text">
                    <p>${game.commentSection[i].commentText}</p>
                    </div>
                    <div class="comment-info">
                        <div class="comment-author-email">
                            ${game.commentSection[i].email}
                        <span class="comment-author">~${game.commentSection[i].name}</span>
                        </div>
                        <div class="rating">
                            ${game.commentSection[i].rating} <span class="fa fa-star checked"></span>
                        </div>
                    </div>
                    </li>`
        
            displayComments.innerHTML += html;
    }
    

}






function rating(){

let starValue = document.getElementsByName('star');

for (let i = 0; i < starValue.length; i++) {
        if(starValue[i].checked){
            return starValue[i].value ;
            
        }
    }
}

